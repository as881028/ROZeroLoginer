<Window x:Class="ROZeroLoginer.Windows.BatchEditWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="批次編輯帳號" Height="650" Width="800" 
        WindowStartupLocation="CenterScreen" ResizeMode="CanResize"
        Background="{StaticResource BackgroundBrush}">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.Row="0" Text="選擇要修改的帳號和欄位" FontSize="16" FontWeight="Bold" Margin="0,0,0,16"/>

        <!-- Account Selection List -->
        <Border Grid.Row="1" Style="{StaticResource CardStyle}" Margin="0,0,0,16">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,8">
                    <TextBlock Text="帳號列表：" FontWeight="Bold" VerticalAlignment="Center"/>
                    <Button Name="SelectAllButton" Content="全選" Style="{StaticResource SecondaryButtonStyle}" 
                            Click="SelectAllButton_Click" Margin="16,0,0,0"/>
                    <Button Name="SelectNoneButton" Content="全不選" Style="{StaticResource SecondaryButtonStyle}" 
                            Click="SelectNoneButton_Click" Margin="8,0,0,0"/>
                </StackPanel>
                
                <ListView Grid.Row="1" Name="AccountListView" SelectionMode="Multiple" Height="200">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="選擇" Width="60">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox IsChecked="{Binding IsSelected}" HorizontalAlignment="Center"/>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <GridViewColumn Header="名稱" Width="120" DisplayMemberBinding="{Binding Account.Name}"/>
                            <GridViewColumn Header="帳號" Width="150" DisplayMemberBinding="{Binding Account.Username}"/>
                            <GridViewColumn Header="分組" Width="100" DisplayMemberBinding="{Binding Account.Group}"/>
                            <GridViewColumn Header="最後使用" Width="150" DisplayMemberBinding="{Binding Account.LastUsed, StringFormat=yyyy-MM-dd HH:mm}"/>
                        </GridView>
                    </ListView.View>
                </ListView>
            </Grid>
        </Border>

        <!-- Edit Options -->
        <Border Grid.Row="2" Style="{StaticResource CardStyle}" Margin="0,0,0,16">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Row="0" Grid.ColumnSpan="2" Text="選擇要修改的欄位：" FontWeight="Bold" Margin="0,0,0,16"/>

                <!-- Group Edit -->
                <CheckBox Grid.Row="1" Grid.Column="0" Name="EditGroupCheckBox" Content="修改分組：" 
                          VerticalAlignment="Center" Margin="0,0,16,8"/>
                <ComboBox Grid.Row="1" Grid.Column="1" Name="GroupComboBox" 
                          IsEnabled="{Binding IsChecked, ElementName=EditGroupCheckBox}"
                          IsEditable="True" Style="{StaticResource ModernComboBoxStyle}" 
                          Height="25" Margin="0,0,0,8"/>

                <!-- Password Edit -->
                <CheckBox Grid.Row="2" Grid.Column="0" Name="EditPasswordCheckBox" Content="修改密碼：" 
                          VerticalAlignment="Center" Margin="0,0,16,8"/>
                <PasswordBox Grid.Row="2" Grid.Column="1" Name="PasswordBox" 
                             IsEnabled="{Binding IsChecked, ElementName=EditPasswordCheckBox}"
                             Height="25" Margin="0,0,0,8"/>

                <!-- OTP Secret Edit -->
                <CheckBox Grid.Row="3" Grid.Column="0" Name="EditOtpCheckBox" Content="修改OTP密鑰：" 
                          VerticalAlignment="Center" Margin="0,0,16,8"/>
                <TextBox Grid.Row="3" Grid.Column="1" Name="OtpSecretTextBox" 
                         IsEnabled="{Binding IsChecked, ElementName=EditOtpCheckBox}"
                         Height="25" Margin="0,0,0,8"/>

                <!-- Name Edit -->
                <CheckBox Grid.Row="4" Grid.Column="0" Name="EditNameCheckBox" Content="修改名稱：" 
                          VerticalAlignment="Center" Margin="0,0,16,0"/>
                <TextBox Grid.Row="4" Grid.Column="1" Name="NameTextBox" 
                         IsEnabled="{Binding IsChecked, ElementName=EditNameCheckBox}"
                         Height="25"/>
            </Grid>
        </Border>

        <!-- Buttons -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Name="OkButton" Content="確定" Style="{StaticResource PrimaryButtonStyle}" 
                    Width="80" Click="OkButton_Click" IsDefault="True"/>
            <Button Name="CancelButton" Content="取消" Style="{StaticResource SecondaryButtonStyle}" 
                    Width="80" Click="CancelButton_Click" IsCancel="True"/>
        </StackPanel>
    </Grid>
</Window>